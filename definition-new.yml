# ============================================================================
# Innovation Review Configuration - LOCAL TEST
# ============================================================================

# Project metadata
project:
  name: "Digital Innovation Review"
  description: "Systematic literature review on supplier involvement in digital innovation"
  researcher: "Ilja Heitlager"
  email: "i.heitlager@tue.nl"
  institution: "TU Eindhoven"
  start_date: "2024-01-15"
  research_question: "How do incumbent firms involve suppliers in digital innovation processes?"

# Database configuration
database:
  host: "localhost"
  port: 5432
  name: "paper_scanner"
  user: "pdfuser"
  password: "pdfpass"

# Search definition
search:
  name: "Supplier Digital Innovation Review"
  description: "Papers on supplier/vendor involvement in digital innovation and transformation"
  
  # Search string (for documentation) 
  query_definition: 
    - "(vendor* OR supplier* OR partner* OR 'service provider' OR provider*) AND ('digital innovation' OR 'digital strategy' OR 'digital transformation')" 

  # Date range
  date_range:
    from: 2015
    to: 2024
  
  # Databases searched
  databases:
    - scopus
    - web_of_science
    - ieee_xplore

templates:
  - template: "screen_basics"
    steps:
      - step: "Metadata screening - test tri-state logic"
        description: |
          Screening logic: 
          - Listed values: hard EXCLUDE (must NOT have)
          - NOT: prefix hard EXCLUDE (must NOT have - exclude everything except this)
          - Omitted: no requirement (leave aside)
        enabled: true
        builtin.metadata_screening:
          # Hard excludes using NOT operator and direct exclusions
          exclude:
            language:
              # Exclude everything that is NOT English (hard exclude non-English)
              - NOT: "en"
            paper_types:
              # Exclude everything that is NOT journal_article
              - NOT: "journal_article"
            quality_tier:
              # Exclude low quality papers
              - NOT: "peer_reviewed_journal"
              - NOT: "non_peer_reviewed_article" # like arxiv"low"

      - step: "Keyword screening - exclude editorials, conceptual, theoretical"
        description: "Exclude papers based on keywords"
        builtin.keyword_screening:
          mode: "inclusion_required"  # Both gates must pass

          # Alternative modes:
          # mode: "exclusion_only"    # Just filter out off-topic domains
          # mode: "soft"              # Keywords for ranking, no filtering      
          exclude:
            keywords: # these are hard rejects
              scope:
                - "sme*s"
              domains:
                - "medical"
                - "healthcare"
                - "patient"
                - "disease"
                - "clinical"
                - "pharmaceutical"
                - "drug"
              other:
                - "agriculture"
                - "farming"
                - "crop"
                - "education"
                - "classroom"
                - "student"
                - "military"
                - "weapon"
                - "consumer behavior"
                - "retail customer"
            study_types: # this is implicitly defined
              # Direct exclusions (hard exclude these study types)
              - "editorial"
              - "conceptual"
              - "theoretical"
              - "literature_review"
          include:
            thresholds: 
              auto_accept: 0.65      # Strong keyword match (need at least two categories
              manual_review: 0.40    # Weak match â†’ semantic screening
              auto_reject: null      # Never auto-reject by keywords alone
              # score will be normalized over categories
            keywords:
              innovation:
                - "digital*" # all variations
                - "digital innovation" # capture combined words
                - "digitiz*"
                - "digital transformation"
                - "technology adoption"
                - "platform"
                - "ecosystem"
              organization:
                - "firm"
                - "company"
                - "organization"
                - "enterprise"
                - "incumbent"
                - "business"
                - "ecosystem"
                - "network"
              collaboration:
                - "supplier*"
                - "vendor*"
                - "partner*"
                - "service provider*"
                - "provider*"
                - "collaboration"
                - "co-creat*"

      - step: "Semantic screening based on research question"
        description: "Use semantic similarity to screen papers based on research question"
        builtin.rocchio_screening:
          model: "sentence-transformers/allenai-specter"
          rocchio_weights:
            alpha: 1.0
            beta: 0.75
            gamma: 0.15
          thresholds:
            accept: 0.90
            reject: 0.5
          initialize_from_keyword_screening: true

# Import configuration - using local test data
steps:
  - step: Import ProQuest papers
    builtin.ris_import:
      file_path: "data/ris/proquest_20251231.ris"
      source_database: "proquest"
  - step: Import full database from IEEE Xplore export
    description: "Import papers from local IEEE Xplore export file from 2025-12-31 "
    builtin.bibtex_import:
      file_path: "data/bib/ieee_20251231.bib"
      source_type: "ieee_xplore"
  - step: Import full database from Web of Science export
    description: "Import papers from local Web of Science export file from 2025-12-31 "
    builtin.bibtex_import:
      file_path: "data/bib/wos_20251231.bib"
      source_type: "web_of_science"

  # - step: Deduplicate papers using multiple matching methods
  #   builtin.deduplication:
  #     methods:
  #       - method: "doi_exact"
  #         priority: 1
  #       - method: "title_author_fuzzy"
  #         priority: 2
  #         threshold: 0.90
  #       - method: "title_fuzzy"
  #         priority: 3
  #         threshold: 0.95

  - step: "First screening of loaded papers"
    description: "Screen loaded papers based on basic criteria" 
    builtin.run-template:
      template: "screen_basics"

  - step: Snowball forward references
    builtin.citations:
      forward: 
        year: 2024
        paper-types:
          - "journal_article"    
        screening: "screen_basics"
        citations: 
          - "openalex"
        details:
          - manual
          - openalex
          - "crossref" 
        output_errors: output/fwd_errors.json