# ============================================================================
# Innovation Review Configuration - LOCAL TEST
# ============================================================================

# Project metadata
project:
  name: "Supplier Digital Innovation Review"
  description: "Systematic literature review on supplier involvement in digital innovation"
  researcher: "Ilja Heitlager"
  email: "i.heitlager@tue.nl"
  institution: "TU Eindhoven"
  start_date: "2024-01-15"
  research_question: "How do incumbent firms involve suppliers in digital innovation processes?"

# Database configuration
database:
  host: "localhost"
  port: 5432
  name: "paper_scanner"
  user: "pdfuser"
  password: "pdfpass"

# Search definition
search:
  name: "Supplier Digital Innovation Review"
  description: "Papers on supplier/vendor involvement in digital innovation and transformation"
  
  # Search string (for documentation) 
  query_definition: 
    - "(vendor* OR supplier* OR partner* OR 'service provider' OR provider*) AND ('digital innovation' OR 'digital strategy' OR 'digital transformation')" 

  # Date range
  date_range:
    from: 2015
    to: 2024
  
  # Databases searched
  databases:
    - scopus
    - web_of_science
    - ieee_xplore

# Import configuration - using local test data
steps:
  - step: Load some files from folder
    builtin.load_files:
      file_path: "data/pdf"
      store_path: "output/pdf"
      download_details: true
      source:
        - crossref
      expected_count: 3

  - step: Patch some records
    builtin.patch:
      patches:
        - doi: "10.1080/10864415.2024.2332047"
          replace_fields:
            abstract: "blabla"
          append_fields:
            keywords:
              - "new-keyword"

  # - step: Import sample BibTeX files from second source
  #   builtin.bibtex_import:
  #     batch_id: "import_test_20241209"
  #     imports:
  #       - name: "Scopus Dataset"
  #         file_path: "./output/papers_export.bib"
  #         source_type: "other"
  #         fix_cite_key: true
  #         expected_count: 5

  # - step: "Dump database contents"
  #   builtin.dump_db:

  # - step: Deduplicate papers using multiple matching methods
  #   builtin.deduplication:
  #     methods:
  #       - method: "doi_exact"
  #         priority: 1
  #       - method: "title_author_fuzzy"
  #         priority: 2
  #         threshold: 0.90
  #       - method: "title_fuzzy"
  #         priority: 3
  #         threshold: 0.95

  # - step: "Dump database contents"
  #   builtin.dump_db:

  # Expansion configuration (snowballing) 
  - step: Snowball first selection
    builtin.expansion:

      # Backward citations 
      backward: 
        # Reference extraction methods (in priority order) 
        extraction_methods: 
          # - "grobid" 
          - "crossref" 
          # - "semantic_scholar" 
          # - "llm_fallback" 
        # max_iterations: 3 
        # saturation_threshold: 0.05 # Stop if new papers < 5% of first iteration 

  - step: Display screening results
    builtin.summarize:
      screening: true

  - step: Export database to JSONL format
    builtin.export:
      format: jsonl
      # output: stdout
      output_path: "./output/papers_export.jsonl"
      exclude_none: true
      duplicates: false
      overwrite: true

  - step: Export database to BibTeX format
    builtin.export:
      format: bibtex
      output_path: "./output/papers_export.bib"
      duplicates: false
      overwrite: true