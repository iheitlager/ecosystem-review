# ============================================================================
# Innovation Review Configuration - LOCAL TEST
# ============================================================================

# Project metadata
project:
  name: "Supplier Digital Innovation Review"
  description: "Systematic literature review on supplier involvement in digital innovation"
  researcher: "Ilja Heitlager"
  institution: "TU Eindhoven"
  start_date: "2024-01-15"
  research_question: "How do incumbent firms involve suppliers in digital innovation processes?"

# Database configuration
database:
  host: "localhost"
  port: 5432
  name: "paper_scanner"
  user: "pdfuser"
  password: "pdfpass"

# Search definition
search:
  name: "Supplier Digital Innovation Review"
  description: "Papers on supplier/vendor involvement in digital innovation and transformation"
  
  # Date range
  date_range:
    from: 2015
    to: 2024
  
  # Databases searched
  databases:
    - scopus
    - web_of_science
    - ieee_xplore

# Import configuration - using local test data
steps:
  - step: Import sample BibTeX files from different sources
    builtin.bibtex_import:
      batch_id: "import_test_20241209"
      imports:
        - name: "Scopus Dataset"
          file_path: "data/scopus.bib"
          source_type: "scopus"
          expected_count: 19

        - name: "IEEE Dataset"
          file_path: "data/ieee.bib"
          source_type: "ieee"
          expected_count: 20
          
        - name: "Web of Science Dataset"
          file_path: "data/wos.bib"
          source_type: "wos"
          expected_count: 20

  - step: "Intermediate message"
    builtin.echo:
      message: "Processing complete - bibtex imported"

  - step: Save checkpoint after import
    builtin.checkpoint:

  - step: Deduplicate papers using multiple matching methods
    builtin.deduplication:
      enabled: true
      methods:
        - method: "doi_exact"
          priority: 1
        - method: "title_author_fuzzy"
          priority: 2
          threshold: 0.90
        - method: "title_fuzzy"
          priority: 3
          threshold: 0.95

  - step: Save checkpoint after deduplication
    builtin.checkpoint:

  - step: Categorize and screen papers for quality
    builtin.categorization:
      enabled: true

  - step: Keyword-based screening
    builtin.keyword_screening:
      enabled: true
    
      # Hard exclusion keywords (if found, exclude immediately)
      exclusion_keywords:
        domains:
          - "medical"
          - "healthcare"
          - "patient"
          - "disease"
          - "clinical"
          - "pharmaceutical"
          - "drug"
        other:
          - "agriculture"
          - "farming"
          - "crop"
          - "education"
          - "classroom"
          - "student"
          - "military"
          - "weapon"
          - "consumer behavior"
          - "retail customer"
      
      # Inclusion keywords (need matches)
      inclusion_keywords:
        innovation:
          - "digital innovation"
          - "digitalization"
          - "digitization"
          - "digital transformation"
          - "technology adoption"
          - "platform"
          - "ecosystem"
        organization:
          - "firm"
          - "company"
          - "organization"
          - "enterprise"
          - "incumbent"
          - "business"
        collaboration:
          - "supplier"
          - "vendor"
          - "partner"
          - "service provider"
          - "provider"
          - "collaboration"
          - "co-creation"

  - step: Save checkpoint after screening
    builtin.checkpoint:

  - step: Display database statistics and summary
    builtin.summarize:
      summary: true
      tabulate:
        - field: paper_type
          duplicates: false
        - field: journal
          duplicates: false
  
  - step: Export database to JSONL format
    builtin.export:
      format: jsonl
      output_path: "~/tmp/papers_export.jsonl"
      exclude_none: true
      duplicates: false
      overwrite: true

  - step: Export database to JSONL format
    builtin.export:
      format: jsonl
      output_path: "~/tmp/papers_export_duplicates_only.jsonl"
      exclude_none: false
      duplicates: only
      overwrite: true

  - step: Export database to BibTeX format
    builtin.export:
      format: bibtex
      output_path: "~/tmp/papers_export.bib"
      duplicates: only
      overwrite: true
